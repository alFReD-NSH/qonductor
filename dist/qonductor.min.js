var Qonductor=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),o=n(3),a=n(4),c=r(a),l=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e);var n=(0,o.getDefaults)(),r=n.autoStart,u=n.keepHistory,s=n.maxConcurrency,a=n.type,c=t.autoStart,l=void 0===c?r:c,f=t.keepHistory,h=void 0===f?u:f,d=t.maxConcurrency,p=void 0===d?s:d,y=t.type,v=void 0===y?a:y;Object.assign(this,{autoStart:l,completed:{},completedCount:0,currentIndex:0,keepHistory:h,hasFinished:!1,hasStarted:!1,maxConcurrency:p,pending:{},pendingCount:0,queue:{},running:{},runningCount:0,type:v.toLowerCase()})}return u(e,[{key:"_addQueueItemCancel",value:function(e){return function(t){e._publishCancellation(t)}}},{key:"_complete",value:function(e,t){this.completed[e]||(this.keepHistory&&(this.completed[e]=t),this.completedCount++),this.running[e]?(delete this.running[e],this.runningCount--):this.pending[e]&&(delete this.pending[e],this.pendingCount--),delete this.queue[e],this.hasStarted&&this.pendingCount?this.start():this.runningCount||this.pendingCount||(this.hasFinished=!0)}},{key:"_getNextIndex",value:function(e,t){if(!e.length)return-1;switch(t){case s.types.LIFO:return Math.max.apply(this,e);case s.types.SIRO:return e[Math.floor(Math.random()*e.length)];default:return Math.min.apply(this,e)}}},{key:"add",value:function(e){var t=this,n=this.currentIndex,r=function(e){return t._complete(u.id,u),e},i=function(e){return t._complete(u.id,u),Promise.reject(e)},u=new c.default(n,e,r,i);return this.queue[n]=u,this.currentIndex++,this.pending[n]=u,this.pendingCount++,u.promise.cancel=this._addQueueItemCancel(u),this.autoStart&&this.runningCount<this.maxConcurrency&&this.start(),u.promise}},{key:"clear",value:function(){var e=this;Object.keys(this.queue).forEach(function(t){e.queue[t].status!==s.statuses.COMPLETED&&e.queue[t].promise.cancel()})}},{key:"start",value:function(){this.hasStarted=!0,this.hasFinished=!1;for(var e=this.runningCount;++e<=this.maxConcurrency;){var t=this._getNextIndex(Object.keys(this.pending),this.type);if(t===-1)break;var n=this.pending[t];this.running[t]=n,this.runningCount++,delete this.pending[t],this.pendingCount--,n.run()}}}],[{key:"setDefaults",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return(0,o.setDefaults)(e)}}]),e}();t.default=l,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={CANCELLED:"CANCELLED",COMPLETED:"COMPLETED",FAILED:"FAILED",PENDING:"PENDING",RUNNING:"RUNNING"},r={FIFO:"fifo",LIFO:"lifo",SIRO:"siro"};t.statuses=n,t.types=r,t.default={statuses:n,types:r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={autoStart:!0,keepHistory:!0,maxConcurrency:10,type:"fifo"},r=function(){return n},i=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return Object.keys(e).forEach(function(t){n.hasOwnProperty(t)&&(n[t]=e[t])}),n};t.getDefaults=r,t.setDefaults=i,t.default={getDefaults:r,setDefaults:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(5),o=n(2),a=n(6),c=r(a),l=n(7),f=function(e,t){return function(n,r){r?t(r):e(n)}},h=function(){function e(t,n,r,u){i(this,e),Object.assign(this,{cancelId:null,id:t,isCancelled:!1,promiseId:null,status:o.statuses.PENDING}),this.promise=this._createPromiseWrapper(n,r,u)}return u(e,[{key:"_createPromiseWrapper",value:function(e,t,n){var r=this,i=(0,l.isFunction)(e)?e:function(t){return t(e)},u=this._getUnsubscribeOnResolve(),a=this._getUnsubscribeOnReject();return new Promise(function(e,t){var n=r._resolvePromise(e),u=r._rejectPromise(t),a=f(n,u);r.cancelId=(0,s.subscribe)(o.statuses.CANCELLED,function(e,n){var i=n.id,u=n.message;i===r.id&&(r.isCancelled=!0,r._cancelPromise(t,u))}),r.promiseId=(0,s.subscribe)(o.statuses.RUNNING,function(e,t){t===r.id&&(i(a),(0,s.unsubscribe)(r.promiseId))})}).then(u).catch(a).then(t).catch(n)}},{key:"_cancelPromise",value:function(e,t){this.status=o.statuses.CANCELLED,e(new c.default(t,o.statuses.CANCELLED))}},{key:"_publishCancellation",value:function(e){(0,s.publish)(o.statuses.CANCELLED,{id:this.id,message:e})}},{key:"_rejectPromise",value:function(e){var t=this;return function(n){t.isCancelled||(t.status=o.statuses.FAILED,e(new c.default(n)))}}},{key:"_resolvePromise",value:function(e){var t=this;return function(n){t.isCancelled||(t.status=o.statuses.COMPLETED,e(n))}}},{key:"_getUnsubscribeOnReject",value:function(){var e=this;return function(t){return(0,s.unsubscribe)(e.cancelId),Promise.reject(t)}}},{key:"_getUnsubscribeOnResolve",value:function(){var e=this;return function(t){return(0,s.unsubscribe)(e.cancelId),t}}},{key:"run",value:function(){this.status=o.statuses.RUNNING,(0,s.publish)(o.statuses.RUNNING,this.id)}}]),e}();t.default=h,e.exports=t.default},function(e,t){e.exports=void 0},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),o=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this));return Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(n,n.constructor):Object.defineProperty(n,"stack",{value:(new Error).stack}),Object.defineProperty(n,"message",{value:e}),n}return u(t,e),t}(Error),a=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],n=arguments.length<=1||void 0===arguments[1]?s.statuses.FAILED:arguments[1];return r(this,t),i(this,Object.getPrototypeOf(t).call(this,"Queue promise was rejected with status "+n+(e?": ":".")+e))}return u(t,e),t}(o);t.default=a,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return Object.prototype.toString.call(e)},r=function(e){return"[object Function]"===n(e)||"function"==typeof e},i=function(e){return!!e&&r(e.then)};t.isFunction=r,t.isPromise=i,t.default={isFunction:r,isPromise:i}}]);