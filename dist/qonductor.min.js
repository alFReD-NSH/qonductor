var Qonductor=function(e){function t(r){if(n[r])return n[r].exports;var s=n[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),o=n(3),a=n(4),c=r(a),l=n(7),f=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];s(this,e);var n=(0,o.getDefaults)(),r=n.autoStart,u=n.keepHistory,i=n.maxConcurrency,a=n.type,c=t.autoStart,l=void 0===c?r:c,f=t.keepHistory,h=void 0===f?u:f,d=t.maxConcurrency,p=void 0===d?i:d,v=t.type,y=void 0===v?a:v;Object.assign(this,{autoStart:l,completed:{},completedCount:0,currentIndex:0,keepHistory:h,hasFinished:!1,hasStarted:!1,maxConcurrency:p,pending:{},pendingCount:0,queue:{},running:{},runningCount:0,type:y.toLowerCase()})}return u(e,[{key:"_addQueueItemCancel",value:function(e){return function(t){e.status!==i.statuses.PENDING&&e.status!==i.statuses.RUNNING||e._publishCancellation(t)}}},{key:"_complete",value:function(e,t){this.completed[e]||(this.keepHistory&&(this.completed[e]=t),this.completedCount++),this.running[e]?(delete this.running[e],this.runningCount--):this.pending[e]&&(delete this.pending[e],this.pendingCount--),delete this.queue[e],this.hasStarted&&this.pendingCount?this.start():this.runningCount||this.pendingCount||(this.hasFinished=!0)}},{key:"_getNextIndex",value:function(e,t){if(!e.length)return-1;switch(t){case i.types.LIFO:return Math.max.apply(this,e);case i.types.SIRO:return e[Math.floor(Math.random()*e.length)];default:return Math.min.apply(this,e)}}},{key:"add",value:function(e){var t=this.currentIndex,n=new c.default(t,e,this._complete.bind(this));return this.queue[t]=n,this.currentIndex++,this.pending[t]=n,this.pendingCount++,n.promise.cancel=this._addQueueItemCancel(n),this.autoStart&&this.runningCount<this.maxConcurrency&&this.start(),n.promise}},{key:"clear",value:function(){var e=this;Object.keys(this.queue).forEach(function(t){e.queue[t].status!==i.statuses.COMPLETED&&e.queue[t].promise.cancel()})}},{key:"start",value:function(){this.hasStarted=!0,this.hasFinished=!1;for(var e=this.runningCount;++e<=this.maxConcurrency;){var t=this._getNextIndex(Object.keys(this.pending),this.type);if(t===-1)break;var n=this.pending[t];this.running[t]=n,this.runningCount++,delete this.pending[t],this.pendingCount--,n.run()}}}],[{key:"getDefaults",value:function(){return(0,o.getDefaults)()}},{key:"resetDefaults",value:function(){return(0,o.resetDefaults)()}},{key:"setDefaults",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!(0,l.isObject)(e))throw new SyntaxError("Defaults assignment must be passed an object.");return(0,o.setDefaults)(e)}}]),e}();t.default=f,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={CANCELLED:"CANCELLED",COMPLETED:"COMPLETED",FAILED:"FAILED",PENDING:"PENDING",RUNNING:"RUNNING"},r={FIFO:"fifo",LIFO:"lifo",SIRO:"siro"};t.statuses=n,t.types=r,t.default={statuses:n,types:r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r={autoStart:!0,keepHistory:!0,maxConcurrency:10,type:"fifo"},s=n({},r),u=function(){return s},i=function(){return s=n({},r)},o=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return Object.keys(e).forEach(function(t){s.hasOwnProperty(t)&&(s[t]=e[t])}),s};t.getDefaults=u,t.resetDefaults=i,t.setDefaults=o,t.default={getDefaults:u,resetDefaults:i,setDefaults:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),o=n(2),a=n(6),c=r(a),l=n(7),f=function(e,t){return function(n,r){r?t(r):e(n)}},h=function(e,t){return function(n){return t(e.id,e),Promise.reject(n)}},d=function(e,t){return function(n){return t(e.id,e),n}},p=function(){function e(t,n,r){s(this,e),Object.assign(this,{cancelId:null,id:t,isCancelled:!1,promiseId:null,status:o.statuses.PENDING});var u=h(this,r),i=d(this,r);this.promise=this._createPromiseWrapper(n,i,u)}return u(e,[{key:"_createPromiseWrapper",value:function(e,t,n){var r=this,s=(0,l.isFunction)(e)?e:function(t){return t(e)},u=this._getUnsubscribeOnResolve(),a=this._getUnsubscribeOnReject();return new Promise(function(e,t){var n=r._resolvePromise(e),u=r._rejectPromise(t),a=f(n,u);r.cancelId=(0,i.subscribe)(o.statuses.CANCELLED,function(e,n){var s=n.id,u=n.message;s===r.id&&(r.isCancelled=!0,r._cancelPromise(t,u))}),r.promiseId=(0,i.subscribe)(o.statuses.RUNNING,function(e,t){t===r.id&&(s(a),(0,i.unsubscribe)(r.promiseId))})}).then(u).catch(a).then(t).catch(n)}},{key:"_cancelPromise",value:function(e,t){this.status=o.statuses.CANCELLED,e(new c.default(t,o.statuses.CANCELLED))}},{key:"_publishCancellation",value:function(e){(0,i.publish)(o.statuses.CANCELLED,{id:this.id,message:e})}},{key:"_rejectPromise",value:function(e){var t=this;return function(n){t.isCancelled||(t.status=o.statuses.FAILED,e(new c.default(n)))}}},{key:"_resolvePromise",value:function(e){var t=this;return function(n){t.isCancelled||(t.status=o.statuses.COMPLETED,e(n))}}},{key:"_getUnsubscribeOnReject",value:function(){var e=this;return function(t){return(0,i.unsubscribe)(e.cancelId),Promise.reject(t)}}},{key:"_getUnsubscribeOnResolve",value:function(){var e=this;return function(t){return(0,i.unsubscribe)(e.cancelId),t}}},{key:"run",value:function(){this.status=o.statuses.RUNNING,(0,i.publish)(o.statuses.RUNNING,this.id)}}]),e}();t.default=p,e.exports=t.default},function(e,t){e.exports=void 0},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){function t(e){r(this,t);var n=s(this,Object.getPrototypeOf(t).call(this));return Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(n,n.constructor):Object.defineProperty(n,"stack",{value:(new Error).stack}),Object.defineProperty(n,"message",{value:e}),n}return u(t,e),t}(Error),a=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],n=arguments.length<=1||void 0===arguments[1]?i.statuses.FAILED:arguments[1];return r(this,t),s(this,Object.getPrototypeOf(t).call(this,"Queue promise was rejected with status "+n+(e?": ":".")+e))}return u(t,e),t}(o);t.default=a,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return Object.prototype.toString.call(e)},r=function(e){return"[object Function]"===n(e)||"function"==typeof e},s=function(e){return"[object Object]"===n(e)&&!!e};t.isFunction=r,t.isObject=s,t.default={isFunction:r,isObject:s}}]);